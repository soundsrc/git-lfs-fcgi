# GNU Make workspace makefile autogenerated by Premake

.NOTPARALLEL:

ifndef config
  config=debug
endif

ifndef verbose
  SILENT = @
endif

ifeq ($(config),debug)
  mongoose_config = debug
  json_c_config = debug
  libfcgi_config = debug
  git_lfs_server_standalone_config = debug
  git_lfs_server_fcgi_config = debug
endif
ifeq ($(config),release)
  mongoose_config = release
  json_c_config = release
  libfcgi_config = release
  git_lfs_server_standalone_config = release
  git_lfs_server_fcgi_config = release
endif

PROJECTS := mongoose json-c libfcgi git-lfs-server-standalone git-lfs-server-fcgi

.PHONY: all clean help $(PROJECTS) 

all: $(PROJECTS)

mongoose:
ifneq (,$(mongoose_config))
	@echo "==== Building mongoose ($(mongoose_config)) ===="
	@${MAKE} --no-print-directory -C . -f mongoose.make config=$(mongoose_config)
endif

json-c:
ifneq (,$(json_c_config))
	@echo "==== Building json-c ($(json_c_config)) ===="
	@${MAKE} --no-print-directory -C . -f json-c.make config=$(json_c_config)
endif

libfcgi:
ifneq (,$(libfcgi_config))
	@echo "==== Building libfcgi ($(libfcgi_config)) ===="
	@${MAKE} --no-print-directory -C . -f libfcgi.make config=$(libfcgi_config)
endif

git-lfs-server-standalone: mongoose json-c
ifneq (,$(git_lfs_server_standalone_config))
	@echo "==== Building git-lfs-server-standalone ($(git_lfs_server_standalone_config)) ===="
	@${MAKE} --no-print-directory -C . -f git-lfs-server-standalone.make config=$(git_lfs_server_standalone_config)
endif

git-lfs-server-fcgi: mongoose json-c libfcgi
ifneq (,$(git_lfs_server_fcgi_config))
	@echo "==== Building git-lfs-server-fcgi ($(git_lfs_server_fcgi_config)) ===="
	@${MAKE} --no-print-directory -C . -f git-lfs-server-fcgi.make config=$(git_lfs_server_fcgi_config)
endif

clean:
	@${MAKE} --no-print-directory -C . -f mongoose.make clean
	@${MAKE} --no-print-directory -C . -f json-c.make clean
	@${MAKE} --no-print-directory -C . -f libfcgi.make clean
	@${MAKE} --no-print-directory -C . -f git-lfs-server-standalone.make clean
	@${MAKE} --no-print-directory -C . -f git-lfs-server-fcgi.make clean

help:
	@echo "Usage: make [config=name] [target]"
	@echo ""
	@echo "CONFIGURATIONS:"
	@echo "  debug"
	@echo "  release"
	@echo ""
	@echo "TARGETS:"
	@echo "   all (default)"
	@echo "   clean"
	@echo "   mongoose"
	@echo "   json-c"
	@echo "   libfcgi"
	@echo "   git-lfs-server-standalone"
	@echo "   git-lfs-server-fcgi"
	@echo ""
	@echo "For more information, see http://industriousone.com/premake/quick-start"